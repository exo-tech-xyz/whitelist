name: "Cache Cargo"
description: "Caches cargo + built programs"
runs:
  using: "composite"
  steps:
      - uses: actions/cache@v2
        name: Cache Cargo
        with:
          # (!!) Sync deps target dirs with test.genesis in Anchor.toml!
          path: |
            ~/.cargo/bin/
            ~/.cargo/registry/index/
            ~/.cargo/registry/cache/
            ~/.cargo/git/db/
            ./target/
            ./deps/metaplex-mpl/token-metadata/target/
            ./deps/metaplex-auth/programs/token-auth-rules/target/
          key: cargo-${{ runner.os }}-typescript-tests-${{ hashFiles('**/Cargo.lock') }}-${{ hashFiles('Anchor.toml') }}